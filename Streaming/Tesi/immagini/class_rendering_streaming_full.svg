<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="903px" preserveAspectRatio="none" style="width:1188px;height:903px;background:#FFFFFF;" version="1.1" viewBox="0 0 1188 903" width="1188px" zoomAndPan="magnify"><defs/><g><!--MD5=[7c8409831ecf5a11c854eae86253be16]
class encode_to_movie--><rect codeLine="10" fill="#F5F5F5" height="99.2188" id="encode_to_movie" style="stroke:#000000;stroke-width:1.5;" width="531" x="7" y="638"/><ellipse cx="214.75" cy="654" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M217.0938,649.6719 C216.1563,649.2344 215.5625,649.0938 214.6875,649.0938 C212.0625,649.0938 210.0625,651.1719 210.0625,653.8906 L210.0625,655.0156 C210.0625,657.5938 212.1719,659.4844 215.0625,659.4844 C216.2813,659.4844 217.4375,659.1875 218.1875,658.6406 C218.7656,658.2344 219.0938,657.7813 219.0938,657.3906 C219.0938,656.9375 218.7031,656.5469 218.2344,656.5469 C218.0156,656.5469 217.8125,656.625 217.625,656.8125 C217.1719,657.2969 217.1719,657.2969 216.9844,657.3906 C216.5625,657.6563 215.875,657.7813 215.1094,657.7813 C213.0625,657.7813 211.7656,656.6875 211.7656,654.9844 L211.7656,653.8906 C211.7656,652.1094 213.0156,650.7969 214.75,650.7969 C215.3281,650.7969 215.9375,650.9531 216.4063,651.2031 C216.8906,651.4844 217.0625,651.7031 217.1563,652.1094 C217.2188,652.5156 217.25,652.6406 217.3906,652.7656 C217.5313,652.9063 217.7656,653.0156 217.9844,653.0156 C218.25,653.0156 218.5156,652.875 218.6875,652.6563 C218.7969,652.5 218.8281,652.3125 218.8281,651.8906 L218.8281,650.4688 C218.8281,650.0313 218.8125,649.9063 218.7188,649.75 C218.5625,649.4844 218.2813,649.3438 217.9844,649.3438 C217.6875,649.3438 217.4844,649.4375 217.2656,649.75 L217.0938,649.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="107" x="235.25" y="658.1543">encode_to_movie</text><line style="stroke:#000000;stroke-width:1.5;" x1="8" x2="537" y1="670" y2="670"/><line style="stroke:#000000;stroke-width:1.5;" x1="8" x2="537" y1="678" y2="678"/><ellipse cx="18" cy="689" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="388" x="27" y="692.2104">encode_to_movie(ostream socket, int in_width, int in_height, int fps)</text><ellipse cx="18" cy="701.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="27" y="705.0151">add_frame(char[] pixels)</text><ellipse cx="18" cy="714.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="505" x="27" y="717.8198">add_instant(char[] audio_stream, int audio_stream_size, int audio_stream_num_samples)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="724.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="225" x="27" y="730.6245">int write_packet(char[] buf, int buf_size)</text><!--MD5=[6212070bac9231021e2c900118362517]
class streaming_server--><rect codeLine="19" fill="#F5F5F5" height="112.0234" id="streaming_server" style="stroke:#000000;stroke-width:1.5;" width="580" x="168.5" y="466"/><ellipse cx="401.25" cy="482" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M403.5938,477.6719 C402.6563,477.2344 402.0625,477.0938 401.1875,477.0938 C398.5625,477.0938 396.5625,479.1719 396.5625,481.8906 L396.5625,483.0156 C396.5625,485.5938 398.6719,487.4844 401.5625,487.4844 C402.7813,487.4844 403.9375,487.1875 404.6875,486.6406 C405.2656,486.2344 405.5938,485.7813 405.5938,485.3906 C405.5938,484.9375 405.2031,484.5469 404.7344,484.5469 C404.5156,484.5469 404.3125,484.625 404.125,484.8125 C403.6719,485.2969 403.6719,485.2969 403.4844,485.3906 C403.0625,485.6563 402.375,485.7813 401.6094,485.7813 C399.5625,485.7813 398.2656,484.6875 398.2656,482.9844 L398.2656,481.8906 C398.2656,480.1094 399.5156,478.7969 401.25,478.7969 C401.8281,478.7969 402.4375,478.9531 402.9063,479.2031 C403.3906,479.4844 403.5625,479.7031 403.6563,480.1094 C403.7188,480.5156 403.75,480.6406 403.8906,480.7656 C404.0313,480.9063 404.2656,481.0156 404.4844,481.0156 C404.75,481.0156 405.0156,480.875 405.1875,480.6563 C405.2969,480.5 405.3281,480.3125 405.3281,479.8906 L405.3281,478.4688 C405.3281,478.0313 405.3125,477.9063 405.2188,477.75 C405.0625,477.4844 404.7813,477.3438 404.4844,477.3438 C404.1875,477.3438 403.9844,477.4375 403.7656,477.75 L403.5938,477.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="106" x="421.75" y="486.1543">streaming_server</text><line style="stroke:#000000;stroke-width:1.5;" x1="169.5" x2="747.5" y1="498" y2="498"/><line style="stroke:#000000;stroke-width:1.5;" x1="169.5" x2="747.5" y1="506" y2="506"/><ellipse cx="179.5" cy="517" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="94" x="188.5" y="520.2104">start(ushort port)</text><ellipse cx="179.5" cy="529.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="184" x="188.5" y="533.0151">send_video_frame(char[] pixels)</text><ellipse cx="179.5" cy="542.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="554" x="188.5" y="545.8198">send_audio_interval(char[] audio_stream, int audio_stream_size, int audio_stream_num_samples)</text><ellipse cx="179.5" cy="555.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="266" x="188.5" y="558.6245">generate_key_event(char[] key, bool pressed)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="176.5" y="565.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="124" x="188.5" y="571.4292">send(ostream socket)</text><!--MD5=[0d0722e0f70966ffc639c2775af5c280]
class ws_server--><rect codeLine="29" fill="#F5F5F5" height="86.4141" id="ws_server" style="stroke:#000000;stroke-width:1.5;" width="143" x="573" y="644.5"/><ellipse cx="609.6" cy="660.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M611.9438,656.1719 C611.0063,655.7344 610.4125,655.5938 609.5375,655.5938 C606.9125,655.5938 604.9125,657.6719 604.9125,660.3906 L604.9125,661.5156 C604.9125,664.0938 607.0219,665.9844 609.9125,665.9844 C611.1313,665.9844 612.2875,665.6875 613.0375,665.1406 C613.6156,664.7344 613.9438,664.2813 613.9438,663.8906 C613.9438,663.4375 613.5531,663.0469 613.0844,663.0469 C612.8656,663.0469 612.6625,663.125 612.475,663.3125 C612.0219,663.7969 612.0219,663.7969 611.8344,663.8906 C611.4125,664.1563 610.725,664.2813 609.9594,664.2813 C607.9125,664.2813 606.6156,663.1875 606.6156,661.4844 L606.6156,660.3906 C606.6156,658.6094 607.8656,657.2969 609.6,657.2969 C610.1781,657.2969 610.7875,657.4531 611.2563,657.7031 C611.7406,657.9844 611.9125,658.2031 612.0063,658.6094 C612.0688,659.0156 612.1,659.1406 612.2406,659.2656 C612.3813,659.4063 612.6156,659.5156 612.8344,659.5156 C613.1,659.5156 613.3656,659.375 613.5375,659.1563 C613.6469,659 613.6781,658.8125 613.6781,658.3906 L613.6781,656.9688 C613.6781,656.5313 613.6625,656.4063 613.5688,656.25 C613.4125,655.9844 613.1313,655.8438 612.8344,655.8438 C612.5375,655.8438 612.3344,655.9375 612.1156,656.25 L611.9438,656.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="63" x="628.4" y="664.6543">ws_server</text><line style="stroke:#000000;stroke-width:1.5;" x1="574" x2="715" y1="676.5" y2="676.5"/><ellipse cx="584" cy="687.5" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="117" x="593" y="690.7104">Endpoint[] endpoints</text><ellipse cx="584" cy="700.3047" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="593" y="703.5151">Config config</text><line style="stroke:#000000;stroke-width:1.5;" x1="574" x2="715" y1="710.1094" y2="710.1094"/><ellipse cx="584" cy="721.1094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="33" x="593" y="724.3198">start()</text><!--MD5=[4fd3bb6c1d79f4919f90c95b62a35422]
class Endpoint--><rect codeLine="35" fill="#F5F5F5" height="99.2188" id="Endpoint" style="stroke:#000000;stroke-width:1.5;" width="298" x="377.5" y="797"/><ellipse cx="496.25" cy="813" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M498.5938,808.6719 C497.6563,808.2344 497.0625,808.0938 496.1875,808.0938 C493.5625,808.0938 491.5625,810.1719 491.5625,812.8906 L491.5625,814.0156 C491.5625,816.5938 493.6719,818.4844 496.5625,818.4844 C497.7813,818.4844 498.9375,818.1875 499.6875,817.6406 C500.2656,817.2344 500.5938,816.7813 500.5938,816.3906 C500.5938,815.9375 500.2031,815.5469 499.7344,815.5469 C499.5156,815.5469 499.3125,815.625 499.125,815.8125 C498.6719,816.2969 498.6719,816.2969 498.4844,816.3906 C498.0625,816.6563 497.375,816.7813 496.6094,816.7813 C494.5625,816.7813 493.2656,815.6875 493.2656,813.9844 L493.2656,812.8906 C493.2656,811.1094 494.5156,809.7969 496.25,809.7969 C496.8281,809.7969 497.4375,809.9531 497.9063,810.2031 C498.3906,810.4844 498.5625,810.7031 498.6563,811.1094 C498.7188,811.5156 498.75,811.6406 498.8906,811.7656 C499.0313,811.9063 499.2656,812.0156 499.4844,812.0156 C499.75,812.0156 500.0156,811.875 500.1875,811.6563 C500.2969,811.5 500.3281,811.3125 500.3281,810.8906 L500.3281,809.4688 C500.3281,809.0313 500.3125,808.9063 500.2188,808.75 C500.0625,808.4844 499.7813,808.3438 499.4844,808.3438 C499.1875,808.3438 498.9844,808.4375 498.7656,808.75 L498.5938,808.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="52" x="516.75" y="817.1543">Endpoint</text><line style="stroke:#000000;stroke-width:1.5;" x1="378.5" x2="674.5" y1="829" y2="829"/><line style="stroke:#000000;stroke-width:1.5;" x1="378.5" x2="674.5" y1="837" y2="837"/><ellipse cx="388.5" cy="848" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="131" x="397.5" y="851.2104">on_open(Connection c)</text><ellipse cx="388.5" cy="860.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="272" x="397.5" y="864.0151">on_close(Connection c, int status, string reason)</text><ellipse cx="388.5" cy="873.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="241" x="397.5" y="876.8198">on_message(Connection c, Message msg)</text><ellipse cx="388.5" cy="886.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="209" x="397.5" y="889.6245">on_error(Connection c, error_code e)</text><!--MD5=[4bf8aff396996fef456cd268939daa24]
class Config--><rect codeLine="45" fill="#F5F5F5" height="73.6094" id="Config" style="stroke:#000000;stroke-width:1.5;" width="106" x="710.5" y="809.5"/><ellipse cx="741.7" cy="825.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M744.0438,821.1719 C743.1063,820.7344 742.5125,820.5938 741.6375,820.5938 C739.0125,820.5938 737.0125,822.6719 737.0125,825.3906 L737.0125,826.5156 C737.0125,829.0938 739.1219,830.9844 742.0125,830.9844 C743.2313,830.9844 744.3875,830.6875 745.1375,830.1406 C745.7156,829.7344 746.0438,829.2813 746.0438,828.8906 C746.0438,828.4375 745.6531,828.0469 745.1844,828.0469 C744.9656,828.0469 744.7625,828.125 744.575,828.3125 C744.1219,828.7969 744.1219,828.7969 743.9344,828.8906 C743.5125,829.1563 742.825,829.2813 742.0594,829.2813 C740.0125,829.2813 738.7156,828.1875 738.7156,826.4844 L738.7156,825.3906 C738.7156,823.6094 739.9656,822.2969 741.7,822.2969 C742.2781,822.2969 742.8875,822.4531 743.3563,822.7031 C743.8406,822.9844 744.0125,823.2031 744.1063,823.6094 C744.1688,824.0156 744.2,824.1406 744.3406,824.2656 C744.4813,824.4063 744.7156,824.5156 744.9344,824.5156 C745.2,824.5156 745.4656,824.375 745.6375,824.1563 C745.7469,824 745.7781,823.8125 745.7781,823.3906 L745.7781,821.9688 C745.7781,821.5313 745.7625,821.4063 745.6688,821.25 C745.5125,820.9844 745.2313,820.8438 744.9344,820.8438 C744.6375,820.8438 744.4344,820.9375 744.2156,821.25 L744.0438,821.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="38" x="759.3" y="829.6543">Config</text><line style="stroke:#000000;stroke-width:1.5;" x1="711.5" x2="815.5" y1="841.5" y2="841.5"/><ellipse cx="721.5" cy="852.5" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="61" x="730.5" y="855.7104">ushort port</text><ellipse cx="721.5" cy="865.3047" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="730.5" y="868.5151">string address</text><line style="stroke:#000000;stroke-width:1.5;" x1="711.5" x2="815.5" y1="875.1094" y2="875.1094"/><!--MD5=[88dbb0a63bb3c138d97a6fe7989da878]
class osd_renderer--><rect codeLine="50" fill="#F5F5F5" height="124.8281" id="osd_renderer" style="stroke:#000000;stroke-width:1.5;" width="459" x="686" y="7"/><ellipse cx="869.75" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M872.0938,18.6719 C871.1563,18.2344 870.5625,18.0938 869.6875,18.0938 C867.0625,18.0938 865.0625,20.1719 865.0625,22.8906 L865.0625,24.0156 C865.0625,26.5938 867.1719,28.4844 870.0625,28.4844 C871.2813,28.4844 872.4375,28.1875 873.1875,27.6406 C873.7656,27.2344 874.0938,26.7813 874.0938,26.3906 C874.0938,25.9375 873.7031,25.5469 873.2344,25.5469 C873.0156,25.5469 872.8125,25.625 872.625,25.8125 C872.1719,26.2969 872.1719,26.2969 871.9844,26.3906 C871.5625,26.6563 870.875,26.7813 870.1094,26.7813 C868.0625,26.7813 866.7656,25.6875 866.7656,23.9844 L866.7656,22.8906 C866.7656,21.1094 868.0156,19.7969 869.75,19.7969 C870.3281,19.7969 870.9375,19.9531 871.4063,20.2031 C871.8906,20.4844 872.0625,20.7031 872.1563,21.1094 C872.2188,21.5156 872.25,21.6406 872.3906,21.7656 C872.5313,21.9063 872.7656,22.0156 872.9844,22.0156 C873.25,22.0156 873.5156,21.875 873.6875,21.6563 C873.7969,21.5 873.8281,21.3125 873.8281,20.8906 L873.8281,19.4688 C873.8281,19.0313 873.8125,18.9063 873.7188,18.75 C873.5625,18.4844 873.2813,18.3438 872.9844,18.3438 C872.6875,18.3438 872.4844,18.4375 872.2656,18.75 L872.0938,18.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="890.25" y="27.1543">osd_renderer</text><line style="stroke:#000000;stroke-width:1.5;" x1="687" x2="1144" y1="39" y2="39"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="694" y="47"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="135" x="706" y="53.2104">osd_window  m_window</text><line style="stroke:#000000;stroke-width:1.5;" x1="687" x2="1144" y1="59.8047" y2="59.8047"/><ellipse cx="697" cy="70.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="163" x="706" y="74.0151">osd_window assert_window()</text><ellipse cx="697" cy="83.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="62" x="706" y="86.8198">int create()</text><ellipse cx="697" cy="96.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="208" x="706" y="99.6245">render_primitive_list get_primitives()</text><ellipse cx="697" cy="109.2188" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="145" x="706" y="112.4292">int draw(const int update)</text><ellipse cx="697" cy="122.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="433" x="706" y="125.2339">osd_renderer make_for_type(int mode, osd_window window, int extra_flags)</text><!--MD5=[cac353306241a567ca72fcdbb9cb5eee]
class renderer_sdl2--><rect codeLine="59" fill="#F5F5F5" height="214.4609" id="renderer_sdl2" style="stroke:#000000;stroke-width:1.5;" width="259" x="786" y="192"/><ellipse cx="868.25" cy="208" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M870.5938,203.6719 C869.6563,203.2344 869.0625,203.0938 868.1875,203.0938 C865.5625,203.0938 863.5625,205.1719 863.5625,207.8906 L863.5625,209.0156 C863.5625,211.5938 865.6719,213.4844 868.5625,213.4844 C869.7813,213.4844 870.9375,213.1875 871.6875,212.6406 C872.2656,212.2344 872.5938,211.7813 872.5938,211.3906 C872.5938,210.9375 872.2031,210.5469 871.7344,210.5469 C871.5156,210.5469 871.3125,210.625 871.125,210.8125 C870.6719,211.2969 870.6719,211.2969 870.4844,211.3906 C870.0625,211.6563 869.375,211.7813 868.6094,211.7813 C866.5625,211.7813 865.2656,210.6875 865.2656,208.9844 L865.2656,207.8906 C865.2656,206.1094 866.5156,204.7969 868.25,204.7969 C868.8281,204.7969 869.4375,204.9531 869.9063,205.2031 C870.3906,205.4844 870.5625,205.7031 870.6563,206.1094 C870.7188,206.5156 870.75,206.6406 870.8906,206.7656 C871.0313,206.9063 871.2656,207.0156 871.4844,207.0156 C871.75,207.0156 872.0156,206.875 872.1875,206.6563 C872.2969,206.5 872.3281,206.3125 872.3281,205.8906 L872.3281,204.4688 C872.3281,204.0313 872.3125,203.9063 872.2188,203.75 C872.0625,203.4844 871.7813,203.3438 871.4844,203.3438 C871.1875,203.3438 870.9844,203.4375 870.7656,203.75 L870.5938,203.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="86" x="888.75" y="212.1543">renderer_sdl2</text><line style="stroke:#000000;stroke-width:1.5;" x1="787" x2="1044" y1="224" y2="224"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="794" y="232"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="158" x="806" y="238.2104">SDL_Renderer sdl_renderer</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="794" y="244.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="141" x="806" y="251.0151">SDL_Surface sdl_surface</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="794" y="257.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="806" y="263.8198">SDL_RWops sdl_buffer</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="810" y="276.6245"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="794" y="283.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="130" x="806" y="289.4292">char[] sdl_buffer_bytes</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="794" y="296.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="157" x="806" y="302.2339">int sdl_buffer_bytes_length;</text><line style="stroke:#000000;stroke-width:1.5;" x1="787" x2="1044" y1="308.8281" y2="308.8281"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="794" y="316.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="806" y="323.0386">free_streaming_render()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="794" y="329.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="233" x="806" y="335.8433">init_streaming_render(int w, int h, int fps)</text><ellipse cx="797" cy="345.4375" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63" x="806" y="348.6479">int create()</text><ellipse cx="797" cy="358.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="209" x="806" y="361.4526">render_primitive_list get_primitives()</text><ellipse cx="797" cy="371.0469" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="145" x="806" y="374.2573">int draw(const int update)</text><ellipse cx="797" cy="383.8516" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="203" x="806" y="387.062">void init(running_machine machine)</text><ellipse cx="797" cy="396.6563" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" text-decoration="underline" textLength="58" x="806" y="399.8667">void exit()</text><!--MD5=[69a7ee1b5d99870f7895004edce15057]
class SDL_Renderer--><rect fill="#F5F5F5" height="48" id="SDL_Renderer" style="stroke:#000000;stroke-width:1.5;" width="117" x="784" y="498"/><ellipse cx="799" cy="514" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M801.3438,509.6719 C800.4063,509.2344 799.8125,509.0938 798.9375,509.0938 C796.3125,509.0938 794.3125,511.1719 794.3125,513.8906 L794.3125,515.0156 C794.3125,517.5938 796.4219,519.4844 799.3125,519.4844 C800.5313,519.4844 801.6875,519.1875 802.4375,518.6406 C803.0156,518.2344 803.3438,517.7813 803.3438,517.3906 C803.3438,516.9375 802.9531,516.5469 802.4844,516.5469 C802.2656,516.5469 802.0625,516.625 801.875,516.8125 C801.4219,517.2969 801.4219,517.2969 801.2344,517.3906 C800.8125,517.6563 800.125,517.7813 799.3594,517.7813 C797.3125,517.7813 796.0156,516.6875 796.0156,514.9844 L796.0156,513.8906 C796.0156,512.1094 797.2656,510.7969 799,510.7969 C799.5781,510.7969 800.1875,510.9531 800.6563,511.2031 C801.1406,511.4844 801.3125,511.7031 801.4063,512.1094 C801.4688,512.5156 801.5,512.6406 801.6406,512.7656 C801.7813,512.9063 802.0156,513.0156 802.2344,513.0156 C802.5,513.0156 802.7656,512.875 802.9375,512.6563 C803.0469,512.5 803.0781,512.3125 803.0781,511.8906 L803.0781,510.4688 C803.0781,510.0313 803.0625,509.9063 802.9688,509.75 C802.8125,509.4844 802.5313,509.3438 802.2344,509.3438 C801.9375,509.3438 801.7344,509.4375 801.5156,509.75 L801.3438,509.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="85" x="813" y="518.1543">SDL_Renderer</text><line style="stroke:#000000;stroke-width:1.5;" x1="785" x2="900" y1="530" y2="530"/><line style="stroke:#000000;stroke-width:1.5;" x1="785" x2="900" y1="538" y2="538"/><!--MD5=[2d1a2f3bb2059553db60cdc96d9849c8]
class SDL_Surface--><rect fill="#F5F5F5" height="48" id="SDL_Surface" style="stroke:#000000;stroke-width:1.5;" width="107" x="936" y="498"/><ellipse cx="951" cy="514" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M953.3438,509.6719 C952.4063,509.2344 951.8125,509.0938 950.9375,509.0938 C948.3125,509.0938 946.3125,511.1719 946.3125,513.8906 L946.3125,515.0156 C946.3125,517.5938 948.4219,519.4844 951.3125,519.4844 C952.5313,519.4844 953.6875,519.1875 954.4375,518.6406 C955.0156,518.2344 955.3438,517.7813 955.3438,517.3906 C955.3438,516.9375 954.9531,516.5469 954.4844,516.5469 C954.2656,516.5469 954.0625,516.625 953.875,516.8125 C953.4219,517.2969 953.4219,517.2969 953.2344,517.3906 C952.8125,517.6563 952.125,517.7813 951.3594,517.7813 C949.3125,517.7813 948.0156,516.6875 948.0156,514.9844 L948.0156,513.8906 C948.0156,512.1094 949.2656,510.7969 951,510.7969 C951.5781,510.7969 952.1875,510.9531 952.6563,511.2031 C953.1406,511.4844 953.3125,511.7031 953.4063,512.1094 C953.4688,512.5156 953.5,512.6406 953.6406,512.7656 C953.7813,512.9063 954.0156,513.0156 954.2344,513.0156 C954.5,513.0156 954.7656,512.875 954.9375,512.6563 C955.0469,512.5 955.0781,512.3125 955.0781,511.8906 L955.0781,510.4688 C955.0781,510.0313 955.0625,509.9063 954.9688,509.75 C954.8125,509.4844 954.5313,509.3438 954.2344,509.3438 C953.9375,509.3438 953.7344,509.4375 953.5156,509.75 L953.3438,509.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="75" x="965" y="518.1543">SDL_Surface</text><line style="stroke:#000000;stroke-width:1.5;" x1="937" x2="1042" y1="530" y2="530"/><line style="stroke:#000000;stroke-width:1.5;" x1="937" x2="1042" y1="538" y2="538"/><!--MD5=[927ed6f33131d04cf264b2c7fa805491]
class SDL_RWops--><rect fill="#F5F5F5" height="48" id="SDL_RWops" style="stroke:#000000;stroke-width:1.5;" width="103" x="1078" y="498"/><ellipse cx="1093" cy="514" fill="#ADD1B2" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><path d="M1095.3438,509.6719 C1094.4063,509.2344 1093.8125,509.0938 1092.9375,509.0938 C1090.3125,509.0938 1088.3125,511.1719 1088.3125,513.8906 L1088.3125,515.0156 C1088.3125,517.5938 1090.4219,519.4844 1093.3125,519.4844 C1094.5313,519.4844 1095.6875,519.1875 1096.4375,518.6406 C1097.0156,518.2344 1097.3438,517.7813 1097.3438,517.3906 C1097.3438,516.9375 1096.9531,516.5469 1096.4844,516.5469 C1096.2656,516.5469 1096.0625,516.625 1095.875,516.8125 C1095.4219,517.2969 1095.4219,517.2969 1095.2344,517.3906 C1094.8125,517.6563 1094.125,517.7813 1093.3594,517.7813 C1091.3125,517.7813 1090.0156,516.6875 1090.0156,514.9844 L1090.0156,513.8906 C1090.0156,512.1094 1091.2656,510.7969 1093,510.7969 C1093.5781,510.7969 1094.1875,510.9531 1094.6563,511.2031 C1095.1406,511.4844 1095.3125,511.7031 1095.4063,512.1094 C1095.4688,512.5156 1095.5,512.6406 1095.6406,512.7656 C1095.7813,512.9063 1096.0156,513.0156 1096.2344,513.0156 C1096.5,513.0156 1096.7656,512.875 1096.9375,512.6563 C1097.0469,512.5 1097.0781,512.3125 1097.0781,511.8906 L1097.0781,510.4688 C1097.0781,510.0313 1097.0625,509.9063 1096.9688,509.75 C1096.8125,509.4844 1096.5313,509.3438 1096.2344,509.3438 C1095.9375,509.3438 1095.7344,509.4375 1095.5156,509.75 L1095.3438,509.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="1107" y="518.1543">SDL_RWops</text><line style="stroke:#000000;stroke-width:1.5;" x1="1079" x2="1180" y1="530" y2="530"/><line style="stroke:#000000;stroke-width:1.5;" x1="1079" x2="1180" y1="538" y2="538"/><!--MD5=[031e8940d7cf74fac4af33ef63847fe2]
link streaming_server to encode_to_movie--><path codeLine="17" d="M353.25,578.031 C353.25,597.442 353.25,619.051 353.25,637.908 " fill="none" id="streaming_server-encode_to_movie" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[a985250adaf39976faac78f44aa1438b]
link streaming_server to ws_server--><path codeLine="27" d="M644.5,578.031 C644.5,599.693 644.5,624.091 644.5,644.348 " fill="none" id="streaming_server-ws_server" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[049f72e139ba96435b6ece46ca20b058]
link ws_server to Endpoint--><path codeLine="42" d="M624.25,730.528 C624.25,751.037 624.25,775.681 624.25,796.967 " fill="none" id="ws_server-Endpoint" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[8a6cd05cef7b20e3a17c92d9a7247e14]
link ws_server to Config--><path codeLine="43" d="M693,730.663 C693,777.9 693,847 693,847 C693,847 700.411,847 710.427,847 " fill="none" id="ws_server-Config" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[3495575551e38f818e7d7313fe052b96]
reverse link osd_renderer to renderer_sdl2--><path d="M915.5,152.212 C915.5,152.212 915.5,191.788 915.5,191.788 " fill="none" id="osd_renderer-backto-renderer_sdl2" style="stroke:#000000;stroke-width:1.0;"/><polygon fill="none" points="908.5,152.212,915.5,132.212,922.5,152.212,908.5,152.212" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[c09426efe95c23c59e71dd9238351205]
link renderer_sdl2 to SDL_Renderer--><path codeLine="77" d="M862.667,406.254 C862.667,440.621 862.667,475.526 862.667,497.885 " fill="none" id="renderer_sdl2-SDL_Renderer" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[5c684f065f99d98582c4a6b26517b381]
link renderer_sdl2 to SDL_Surface--><path codeLine="78" d="M989.5,406.254 C989.5,440.621 989.5,475.526 989.5,497.885 " fill="none" id="renderer_sdl2-SDL_Surface" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[9138765db5415effd4b8b21f4cf5c7a7]
link renderer_sdl2 to SDL_RWops--><path codeLine="79" d="M1045.14,299 C1081.59,299 1111.5,299 1111.5,299 C1111.5,299 1111.5,439.914 1111.5,497.711 " fill="none" id="renderer_sdl2-SDL_RWops" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[144cad93b26dd5138e2abdd4c10a7639]
link renderer_sdl2 to streaming_server--><path codeLine="80" d="M824.333,406.246 C824.333,446.186 824.333,482 824.333,482 C824.333,482 792.934,482 748.532,482 " fill="none" id="renderer_sdl2-streaming_server" style="stroke:#000000;stroke-width:1.0;"/><!--MD5=[fd5d802087ead0d76b98fb1970c6db0a]
@startuml
skinparam Shadowing false
skinparam LineType ortho
skinparam ArrowColor black

skinparam class {
    BackgroundColor WhiteSmoke
    BorderColor black
}

class encode_to_movie {
	+encode_to_movie(ostream socket, int in_width, int in_height, int fps)
	+add_frame(char[] pixels)
	+add_instant(char[] audio_stream, int audio_stream_size, int audio_stream_num_samples)
	-{static} int write_packet(char[] buf, int buf_size)
}

streaming_server - - encode_to_movie

class streaming_server {
	+start(ushort port)
	+send_video_frame(char[] pixels)
	+send_audio_interval(char[] audio_stream, int audio_stream_size, int audio_stream_num_samples)
	+generate_key_event(char[] key, bool pressed)
	-send(ostream socket)
}

streaming_server - - ws_server

class ws_server {
	+Endpoint[] endpoints
	+Config config
	+start()
}

class Endpoint {
	+on_open(Connection c)
	+on_close(Connection c, int status, string reason)
	+on_message(Connection c, Message msg)
	+on_error(Connection c, error_code e)
}

ws_server - - Endpoint
ws_server - - Config

class Config {
	+ushort port
	+string address
}

class osd_renderer {
	-osd_window  m_window
	+osd_window assert_window()
	{abstract} +int create()
	{abstract} +render_primitive_list get_primitives()
	{abstract} +int draw(const int update)
	{static} +osd_renderer make_for_type(int mode, osd_window window, int extra_flags)
}

class renderer_sdl2 extends osd_renderer {
	-free_streaming_render()
	-init_streaming_render(int w, int h, int fps)
	
	-SDL_Renderer sdl_renderer
	-SDL_Surface sdl_surface
	-SDL_RWops sdl_buffer

	-char[] sdl_buffer_bytes
	-int sdl_buffer_bytes_length;
	
	+int create()
	+render_primitive_list get_primitives()    
	+int draw(const int update)
	{static} +void init(running_machine machine)
	{static} +void exit()
}

renderer_sdl2 - - SDL_Renderer
renderer_sdl2 - - SDL_Surface
renderer_sdl2 - - SDL_RWops
renderer_sdl2 - - streaming_server
@enduml

PlantUML version 1.2021.7beta4(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>